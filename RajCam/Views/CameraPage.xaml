<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="RajCam.Views.CameraPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Grid>
        <!-- Camera Preview -->
        <Border x:Name="PreviewBorder" Background="Black" Margin="0,70,0,100">
            <CaptureElement x:Name="PreviewControl" Stretch="UniformToFill"/>
        </Border>
        
        <!-- Grid Overlay -->
        <Canvas x:Name="GridOverlay" Visibility="Collapsed" Margin="0,70,0,100">
            <Line X1="213" Y1="0" X2="213" Y2="640" Stroke="White" StrokeThickness="1" Opacity="0.5"/>
            <Line X1="426" Y1="0" X2="426" Y2="640" Stroke="White" StrokeThickness="1" Opacity="0.5"/>
            <Line X1="0" Y1="160" X2="640" Y2="160" Stroke="White" StrokeThickness="1" Opacity="0.5"/>
            <Line X1="0" Y1="320" X2="640" Y2="320" Stroke="White" StrokeThickness="1" Opacity="0.5"/>
        </Canvas>

        <!-- Camera Controls Overlay -->
        <Grid Margin="0,70,0,100">
            <!-- Top Controls -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="20">
                <Button x:Name="FlashButton" Content="⚡" FontSize="20" Width="50" Height="50" CornerRadius="25" 
                       Background="#333" Foreground="White" Margin="0,0,10,0" Click="FlashButton_Click"/>
                <Button x:Name="GridButton" Content="⊞" FontSize="20" Width="50" Height="50" CornerRadius="25" 
                       Background="#333" Foreground="White" Margin="0,0,10,0" Click="GridButton_Click"/>
                <Button x:Name="TimerButton" Content="⏱️" FontSize="16" Width="50" Height="50" CornerRadius="25" 
                       Background="#333" Foreground="White" Margin="0,0,10,0" Click="TimerButton_Click"/>
                <Button x:Name="HdrButton" Content="HDR" FontSize="12" Width="50" Height="50" CornerRadius="25" 
                       Background="#333" Foreground="White" Margin="0,0,10,0" Click="HdrButton_Click"/>
                <Button x:Name="NightButton" Content="🌙" FontSize="16" Width="50" Height="50" CornerRadius="25" 
                       Background="#333" Foreground="White" Margin="0,0,10,0" Click="NightButton_Click"/>
                <Button x:Name="BurstButton" Content="📸📸" FontSize="12" Width="50" Height="50" CornerRadius="25" 
                       Background="#333" Foreground="White" Click="BurstButton_Click"/>
            </StackPanel>

            <!-- Side Controls -->
            <StackPanel Orientation="Vertical" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="20,0">
                <Button x:Name="ZoomInButton" Content="+" FontSize="24" Width="50" Height="50" CornerRadius="25" 
                       Background="#333" Foreground="White" Margin="0,0,0,10" Click="ZoomIn_Click"/>
                <Button x:Name="ZoomOutButton" Content="−" FontSize="24" Width="50" Height="50" CornerRadius="25" 
                       Background="#333" Foreground="White" Click="ZoomOut_Click"/>
            </StackPanel>

            <!-- Main Capture Controls -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Bottom" Margin="0,0,0,20">
                <Button x:Name="GalleryButton" Content="🖼️" FontSize="20" Width="60" Height="60" CornerRadius="30" 
                       Background="#333" Foreground="White" Margin="0,0,20,0" Click="GalleryButton_Click"/>
                
                <Button x:Name="FilterButton" Content="🎨" FontSize="20" Width="60" Height="60" CornerRadius="30" 
                       Background="#333" Foreground="White" Margin="0,0,20,0" Click="FilterButton_Click"/>
                
                <Button x:Name="CaptureButton" Content="📷" FontSize="40" Width="80" Height="80" CornerRadius="40" 
                       Background="White" Foreground="Black" Click="CaptureButton_Click"/>
                
                <Button x:Name="RecordButton" Content="⏺" FontSize="35" Width="60" Height="60" CornerRadius="30" 
                       Background="#ff4444" Foreground="White" Margin="20,0,0,0" Click="RecordButton_Click"/>
                
                <Button x:Name="SettingsButton" Content="⚙️" FontSize="20" Width="60" Height="60" CornerRadius="30" 
                       Background="#333" Foreground="White" Margin="20,0,0,0" Click="SettingsButton_Click"/>
            </StackPanel>
        </Grid>

        <!-- Timer Countdown -->
        <TextBlock x:Name="TimerCountdown" Text="" FontSize="72" FontWeight="Bold" Foreground="#00d4ff" 
                  HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="Collapsed"/>
        
        <!-- Mode Indicator -->
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="20,90,0,0">
            <TextBlock x:Name="ModeIndicator" Text="" FontSize="16" FontWeight="Bold" Foreground="#00d4ff" Margin="0,0,10,0"/>
            <TextBlock x:Name="ResolutionIndicator" Text="1920x1080" FontSize="14" Foreground="#ffd700"/>
        </StackPanel>

        <!-- Capture Flash Effect -->
        <Border x:Name="FlashEffect" Background="White" Opacity="0" Visibility="Collapsed"/>
        
        <!-- Filter Selection Panel -->
        <Grid x:Name="FilterPanel" Width="300" HorizontalAlignment="Right" Background="#2a2a2a" Visibility="Collapsed" Margin="0,70,0,100">
            <ScrollViewer>
                <StackPanel Padding="20">
                    <TextBlock Text="🎨 FILTERS" FontSize="18" FontWeight="Bold" Foreground="White" Margin="0,0,0,20"/>
                    <Button Content="None" Width="260" Margin="0,0,0,10" Click="ApplyFilter_Click" Tag="None"/>
                    <Button Content="Grayscale" Width="260" Margin="0,0,0,10" Click="ApplyFilter_Click" Tag="Grayscale"/>
                    <Button Content="Sepia" Width="260" Margin="0,0,0,10" Click="ApplyFilter_Click" Tag="Sepia"/>
                    <Button Content="Vintage" Width="260" Margin="0,0,0,10" Click="ApplyFilter_Click" Tag="Vintage"/>
                    <Button Content="Cool" Width="260" Margin="0,0,0,10" Click="ApplyFilter_Click" Tag="Cool"/>
                    <Button Content="Warm" Width="260" Margin="0,0,0,10" Click="ApplyFilter_Click" Tag="Warm"/>
                    <Button Content="Dramatic" Width="260" Margin="0,0,0,10" Click="ApplyFilter_Click" Tag="Dramatic"/>
                    <Button Content="Close" Width="260" Margin="0,20,0,0" Click="CloseFilter_Click"/>
                </StackPanel>
            </ScrollViewer>
        </Grid>
    </Grid>
</Page>